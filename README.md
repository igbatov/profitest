# profitest

Идея.
1. Получаем строку, проверяем что она не слишком длинная, экранируем её и сохраняем в базу, в необработанном виде.
2. Заменяем все нецифры на пробелы, получаем массив чисел (блоков цифр) котрые раздалены одним или несколькими пробелами.
3. Нам теперь нужно разбить этот массив на телефонные номера. 
Если массив чисел будем слишком большой, то алгоритм может работать слишком долго,
в этом случае исходную строку мы будем отсылать на почту специально обученному человеку.
Кол-во действий ограничено сверху С*3^("длина строкиез пробелов"/7). 
Для 70 цифр (6-10 телефонных номеров) - порядка 10^5 действий.
Пусть посмотрит глазами и попытается понять что же хотел донести нам пользователь. 
4. Изучив статью в википедии мы будем считать что в большинстве случаев пользователь вводит номер в формате
7, 10 или 11 цифр. То есть каждый телефонный номер это строка длинной 7 (прямой номер), 10 (формат 905 123 45 67) или 11 цифр (8 905 123 45 67).
Разбивать можно строя дерево всех подходящих разбиений. 
Пример для строки из 3х номеров.
7 905 123 45 67 495 654 3211 78655 11
Здесь у нас получился массив из 10 блоков.
Чтобы выделить первый телефонный номер будем конкатенировать числа пока не образуется строка длины 7, 10 или 11 цифр.
Если образовалась строка длины 7 - делаем ветвление дерева. Одна ветка пойдет набирать следующий блок,
вторая ветка продолжит набирать первый в расчете на то что можно добить 7 до 10 или 11.

В итоге получится набор возможных разбиений на телефонные номера.
В большинстве случаев будет всего одно валидное разбиение. 
(Разбиение валидное если все блоки длины 7 10 или 11).

Если возможны несколько вариантов разбиений или не получилось ни одного разбиения, или на каком-то этапе возникла ошибка,
надо отослать на почту специально обученному человеку исходную строку как в пункте 3.

5. В итоге мы имеем одно разбиение которое и являет собой номера, которые на нужно привести к единому формату
8xxxxxxxxxx.

https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BB%D0%B5%D1%84%D0%BE%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BF%D0%BB%D0%B0%D0%BD_%D0%BD%D1%83%D0%BC%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8_%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D0%B8

Организация БД.
Будем хранить в виде трех таблиц - таблица номеров, таблица пользователей, таблица заказов пользователей.
Номера и заказы ссылаются на пользователей.